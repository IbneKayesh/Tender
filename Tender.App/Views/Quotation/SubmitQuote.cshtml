@model Tender.Models.Models.RFQ_BIDDING

@{
    ViewBag.Title = "Submit Quote";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<section class="content">
    <div class="card card-solid">
        <div class="card-body">
            <div class="row">
                <div class="col-12 col-sm-4">
                    <div class="col-12">
                        @if (Model.IMAGE_PATH != null)
                        {
                            <img src="~/@Model.IMAGE_PATH" class="product-image img-fluid" alt="Product Image" />
                        }
                        else
                        {
                            <img src="~/App_Asset/dist/img/noImage.jpg" class="product-image img-fluid" alt="Product Image" />
                        }
                    </div>                    
                </div>
                <div class="col-12 col-sm-8">
                    <h4 class="my-3">Tender Number :<span class="text-primary">@Model.RFQ_NUMBER</span> </h4>
                    <h6 class="my-3">Item :<span class="text-success"> @Model.TND_PRODUCTS_NAME</span></h6>
                    <p>Item Description : @Model.TND_PRODUCTS_DESC </p>
                    <p>Tender Type : @Model.SELL_BUY </p>
                    <hr>
                    <h5>This Auction Ends in</h5>
                    <input type="hidden" value="@Model.END_DATE.ToString("yyyy-MM-dd")" class="endDate" />
                    <span class="text-danger text-bold" id="auc_end"></span>
                    <hr />
                    <div class="row">
                        <div class="col">Total Bids : @Model.TOTAL_BIDDING </div>
                    </div>

                    <div class="btn-default py-2 px-0 mt-4">
                        <h5 class="mb-0">
                            Rate :   @Model.TND_PRODUCTS_RATE @Model.CURRENCY_NAME, Quantity : @Model.TND_PRODUCTS_QTY @Model.UNIT
                        </h5>
                    </div>
                </div>
            </div>
            <br />
            <div class="card-footer row">
                <div class="col-md-3 col-sm-4 mb-2">
                    <a class="btn btn-block btn-lg btn-outline-primary" id="tndDetails">
                        Tender Information
                        <i class="fa fa-file"></i>
                    </a>
                </div>
                <div class="col-md-3 col-sm-4  mb-2">
                    <a class="btn btn-block btn-lg btn-outline-primary" id="tndItem">
                        Item Information
                        <i class="fa fa-list-alt"></i>
                    </a>
                </div>
                <div class="col-md-3 col-sm-4 mb-2">
                    <a class="btn btn-block btn-lg btn-outline-primary" id="tndShipment">
                        Shipment Details
                        <i class="fas fa-shipping-fast"></i>
                    </a>
                </div>
                <div class="col-md-3 col-sm-4 mb-2">
                    <a class="btn btn-block btn-lg btn-outline-primary" id="tndPayment">
                        Submit Quotation
                        <i class="fab fa-first-order"></i>
                    </a>
                </div>
            </div>
            <div class="row" id="detailsBody">
                <div class="col-md-12">
                    <table class="table table-borderless table-responsive">
                        <tbody>
                            <tr>
                                <th>Tender Number  </th>
                                <td>:  @Model.RFQ_NUMBER</td>
                            </tr>
                            <tr>
                                <th>Tender Type  </th>
                                <td>:  @Model.SELL_BUY</td>
                            </tr>
                            <tr>
                                <th>Bidding type </th>
                                <td>:  @Model.RE_BID</td>
                            </tr>
                            <tr>
                                <th>Quotation Rate Range </th>
                                <td>:  @Model.LOWER_RATE</td>
                            </tr>
                            <tr>
                                <th>Quotation Submit Start:  </th>
                                <td>:  @Model.START_DATE.ToString("dd-MMM-yyyy")</td>
                            </tr>
                            <tr>
                                <th>Quotation Submit End:  </th>
                                <td>:  @Model.END_DATE.ToString("dd-MMM-yyyy")</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row" id="itemBody" style="display:none;">
                <div class="col-md-12">
                    <table class="table table-borderless table-responsive">
                        <tbody>
                            <tr>
                                <th>Product Name  </th>
                                <td>: @Model.TND_PRODUCTS_NAME</td>
                            </tr>
                            <tr>
                                <th>Tender Rate </th>
                                <td>: @Model.TND_PRODUCTS_RATE</td>
                            </tr>
                            <tr>
                                <th>Product Quantity  </th>
                                <td>: @Model.TND_PRODUCTS_QTY</td>
                            </tr>
                            <tr>
                                <th>Unit </th>
                                <td>: @Model.UNIT</td>
                            </tr>
                            <tr>
                                <th>Product Description   </th>
                                <td>:@Model.TND_PRODUCTS_DESC</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row" id="shipmentBody" style="display:none;">
                <div class="col-md-12">
                    <table class="table table-borderless">
                        <tbody>
                            <tr>
                                <th>Partial ShipMent</th>
                                <td>: @Model.PARTIAL_SHIPMENT</td>
                            </tr>
                            <tr>
                                <th>Last Shipment Date</th>
                                <td>: @Model.LAST_DELIVERY_DATE.ToString("dd-MMMM-yyyy")</td>
                            </tr>
                            <tr>
                                <th>Shipment Mode</th>
                                <td>:  @Model.TENDER_SHIPMENT_MODE</td>
                            </tr>
                            <tr>
                                <th>Port Name</th>
                                <td>:  @Model.TENDER_PORT_ID</td>
                            </tr>
                            <tr>
                                <th>Receiver Name</th>
                                <td>:  @Model.RECEIVER_NAME</td>
                            </tr>
                            <tr>
                                <th>  Receiver Details </th>
                                <td>:  @Model.RECEIVER_DETAILS</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row" id="paymentBody" style="display:none;">
                <div class="col-md-12">
                    @using (Html.BeginForm("SubmitQuote", "Quotation", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        @Html.ValidationSummary(false, "", new { @class = "text-danger" })
                        @Html.AntiForgeryToken()
                        @Html.HiddenFor(model => model.RFQ_NUMBER)
                        @Html.HiddenFor(model => model.VENDOR_ID)
                        @Html.HiddenFor(model => model.PRODUCTS_ID)
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-4 col-lg-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">Loading Address</label> <span class="text-danger">*</span>
                                        @Html.TextAreaFor(m => m.LOADING_ADDRESS, new { @class = "form-control form-control-sm", rows = "1", required = "required", placeholder = "Enter Loding Address" })
                                        @Html.ValidationMessageFor(m => m.LOADING_ADDRESS, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-4 col-lg-3 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">Sender Name</label> <span class="text-danger">*</span>
                                        @Html.EditorFor(model => model.SENDER_NAME, new { htmlAttributes = new { @class = "form-control form-control-sm", required = "required", placeholder = "Sender Name" } })
                                        @Html.ValidationMessageFor(m => m.SENDER_NAME, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-4 col-lg-3 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">Sender Details</label> <span class="text-danger">*</span>
                                        @Html.TextAreaFor(m => m.SENDER_DETAILS, new { @class = "form-control form-control-sm", rows = "1", required = "required", placeholder = "Sender Details" })
                                        @Html.ValidationMessageFor(m => m.SENDER_DETAILS, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3 col-lg-2 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">Submit Rate</label> <span class="text-danger">*</span>
                                        @Html.EditorFor(model => model.PRODUCTS_RATE, new { htmlAttributes = new { @class = "form-control form-control-sm", required = "required", placeholder = "Product Rate" } })
                                        @Html.ValidationMessageFor(m => m.PRODUCTS_RATE, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3 col-lg-2 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">Quantity</label> <span class="text-danger">*</span>
                                        @Html.EditorFor(model => model.PRODUCTS_QUANTITY, new { htmlAttributes = new { @class = "form-control form-control-sm", placeholder = "Quantity" } })
                                        @Html.ValidationMessageFor(m => m.PRODUCTS_QUANTITY, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-6 col-lg-3 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">Product Details</label>
                                        @Html.TextAreaFor(m => m.PRODUCTS_DESC, new { @class = "form-control form-control-sm", rows = "1", required = "required", placeholder = "Product Details" })
                                        @Html.ValidationMessageFor(m => m.PRODUCTS_DESC, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                @if (Model.TENDER_SHIPMENT_MODE != null && Model.TENDER_PORT_ID != null)
                                {
                                    <div class="col-lg-2 col-md-4 col-sm-6">
                                        <div class="form-group">
                                            <label class="control-label">Shipment Mode</label>
                                            @Html.DropDownList("SHIPMENT_MODE", null, "-Select-", new { @class = "form-control form-control-sm select2", placeholder = "" })
                                            @Html.ValidationMessageFor(m => m.SHIPMENT_MODE, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-md-4 col-sm-6">
                                        <div class="form-group">
                                            <label class="control-label">Port Name</label>
                                            @Html.DropDownList("PORT_ID", null, "-Select-", new { @class = "form-control form-control-sm select2", placeholder = "" })
                                            @Html.ValidationMessageFor(m => m.PORT_ID, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                }

                                </div>
                            <div class="row">
                                <div class="col-md-2 col-lg-2">
                                    <div class="form-group">
                                        <input type="submit" class="btn btn-sm btn-primary" value="Submit" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>

        </div>

    </div>

</section>

@section scripts{
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/App_Asset/js/bid.js"></script>
    <script>
        $(document).ready(function () {
            setInterval("dateimeFunction()", 1000);

            function preventBack() { window.history.forward(); }
            setTimeout("preventBack()", 0);
            window.onunload = function () { null };
        })
        function dateimeFunction() {
            var endDateTime = $('.endDate').val();
            var diffTime = Math.abs(new Date().valueOf() - new Date(endDateTime).valueOf());
            var days = diffTime / (24 * 60 * 60 * 1000);
            var hours = (days % 1) * 24;
            var minutes = (hours % 1) * 60;
            var secs = (minutes % 1) * 60;
            [days, hours, minutes, secs] = [Math.floor(days), Math.floor(hours), Math.floor(minutes), Math.floor(secs)]
            $('#auc_end').text("" + days + "d   " + hours + "h   " + minutes + "m   " + secs + "s");
        }
    </script>

}
